<!DOCTYPE html>
<html>
<head>
  <title>Consultant Verification</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <h2>Visa Consultant Verification</h2>

    <p>Enter consultant details</p>

    <label>Consultant Name</label>
    <input type="text" id="name" placeholder="Enter consultant name">

    <label>City</label>
    <input type="text" id="city" placeholder="Enter city">

    <button onclick="verifyConsultant()">Verify Consultant</button>

    <!-- Result will appear here -->
    <p id="result"></p>

    <br>
    <a href="document.html">Next → Document Check</a>
  </div>

  <!-- ✅ SCRIPT BLOCK (THIS WAS MISSING) -->
  <script>
    function verifyConsultant() {
      const name = document.getElementById("name").value;
      const city = document.getElementById("city").value;

      // basic validation
      if (!name || !city) {
        document.getElementById("result").innerText =
          "❌ Please enter all details";
        return;
      }

      // backend API call
      fetch(`https://visa-fraud-prevention-system.onrender.com/api/verify-consultant?name=${name}&city=${city}`)
        .then(response => response.json())
        .then(data => {
          if (data.trusted) {
            document.getElementById("result").innerText =
              "✅ Consultant office found and VERIFIED";
          } else {
            document.getElementById("result").innerText =
              "❌ Consultant NOT verified / possible fraud";
          }
        })
        .catch(error => {
          console.error(error);
          document.getElementById("result").innerText =
            "⚠️ Backend not responding";
        });
    }
  </script>
</body>
</html>
