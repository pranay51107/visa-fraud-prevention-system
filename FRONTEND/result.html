<!DOCTYPE html>
<html>
<head>
  <title>Risk Analysis Result</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <h2>Visa Risk Analysis</h2>

    <p>Based on the uploaded documents and consultant verification:</p>

    <ul id="details"></ul>

    <h3 id="finalDecision"></h3>

    <br>
    <a href="maps.html">üìç View Consultant Location</a>
    <br><br>
    <a href="index.html">‚Üê Back to Home</a>
  </div>

  <script>
    const data = JSON.parse(localStorage.getItem("riskResult"));

    const detailsList = document.getElementById("details");
    const decision = document.getElementById("finalDecision");

    if (!data) {
      decision.innerText = "‚ö† No verification data found";
    } else {
      // Document status
      const passportOk = data.passportVerified === true;
      const offerOk = data.offerLetterVerified === true;

      detailsList.innerHTML += passportOk
        ? "<li>‚úî Passport verified</li>"
        : "<li>‚ùå Passport not verified</li>";

      detailsList.innerHTML += offerOk
        ? "<li>‚úî Offer letter verified</li>"
        : "<li>‚ùå Offer letter not verified</li>";

      // Risk display
      if (data.riskLevel === "HIGH") {
        detailsList.innerHTML += "<li>‚ö† High risk detected</li>";
      } else if (data.riskLevel === "MEDIUM") {
        detailsList.innerHTML += "<li>‚ö† Medium risk detected</li>";
      } else {
        detailsList.innerHTML += "<li>‚úî Low risk detected</li>";
      }

      // ‚úÖ FINAL DECISION LOGIC (IMPORTANT FIX)
      if (!passportOk || !offerOk) {
        decision.innerText = "‚ö† FINAL DECISION: MANUAL REVIEW REQUIRED";
      } else if (data.riskLevel === "HIGH") {
        decision.innerText = "‚ùå FINAL DECISION: HIGH RISK ‚Äì FRAUD SUSPECTED";
      } else if (data.riskLevel === "MEDIUM") {
        decision.innerText = "‚ö† FINAL DECISION: MANUAL REVIEW REQUIRED";
      } else {
        decision.innerText = "‚úÖ FINAL DECISION: SAFE";
      }
    }
  </script>
</body>
</html>

